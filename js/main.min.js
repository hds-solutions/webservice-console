this.AgenciaModerna=this.AgenciaModerna||{},function(t,e,a){t.token=null,t.url=e("#console").attr("action"),t.method=null,t.endpoint=null,t.extra=e("#extra"),t.output=e("#raw-output"),t.oSuccess=e("#output-success"),t.oCode=e("#output-code"),t.oError=e("#output-error"),t.oResult=e("#output-result"),t.init=function(){e("#console").submit(function(){return!1}),e("#endpoint").change(function(){t.method=e(this).find(">option").eq(e(this).val()).attr("method"),t.endpoint=e(this).find(">option").eq(e(this).val()).attr("endpoint"),t.extra.removeAttr("class").addClass("form-control"),"true"!==e(this).find(">option").eq(e(this).val()).attr("extra")&&t.extra.addClass("hidden").val(""),e("#endpoint-tabs>li>a").eq(e(this).val()).tab("show")}).val(0).change(),e("#extra").keyup(function(t){8!==t.keyCode&&9!==t.keyCode&&46!==t.keyCode&&"/"!==e(this).val().substr(0,1)&&e(this).val("/"+e(this).val())}),e("#pass").keydown(function(t){8!=t.keyCode&&46!=t.keyCode||"password"!=e(this).attr("type")||(e(this).val("").attr("type","text"),e(".btn-hash.password").fadeIn())}),e(".btn-hash").each(function(){var t=e(this);t.click(function(){e("#pass").val(CryptoJS.MD5(Base64.encode(e("#pass").val())).toString()).attr("type","password"),t.fadeOut()})}),e(".field-wrapper+.crypt").each(function(){var t=e(this),a=t.prev().find(">input"),o=t.find(">button");a.keydown(function(t){8!=t.keyCode&&46!=t.keyCode||!0!==a.prop("crypted")||(a.val(""),o.fadeIn(),a.prop("crypted",!1))}),o.click(function(){var t=a.val(),e=o.attr("crypt").split(",");for(var n in e)switch(e[n]){case"md5":t=CryptoJS.MD5(t).toString();break;case"base64":t=Base64.encode(t);break;default:throw new Error("Unknown crypt option "+e[n])}a.val(t).prop("crypted",!0),o.fadeOut()})}),e("#send").click(function(){a.lock(),t.oSuccess.html("&nbsp;"),t.oCode.html("&nbsp;"),t.oError.html("&nbsp;"),t.oResult.html("&nbsp;"),t.output.html("&nbsp;");var o=new Date,n={method:t.method,url:t.url+"/"+t.endpoint+(""!=t.extra.val()?t.extra.val():""),headers:{"Authorization-Token":t.token},complete:function(n){var s=void 0!==n.responseJSON?n.responseJSON:JSON.parse(n.responseText);for(var r in t.oSuccess.text(s.success?"true":"false"),t.oCode.text(s.code),t.oError.text(s.error),s)-1===["success","code","error"].indexOf(r)&&(t.oResult.append('<div class="row"><div class="col-md-2"><kbd>'+r+'</kbd></div><div class="col-md-10"><var id="output-result-'+r+'"></var></div></div>'),null!==s[r]&&"object"==typeof s[r]?e("#output-result-"+r).jJsonViewer(s[r]):e("#output-result-"+r).html('<ul class="jjson-container"><li><span class="boolean">'+s[r]+"</span></li></ul>"));t.output.text(n.responseText),e("#output-panel").attr("class","panel minheight-150 "+(s.success?"panel-success":"panel-danger")),e("#response-headers").empty();var i=n.getAllResponseHeaders().split("\n").sort();for(var r in i)if(""!=i[r]){var d=i[r].split(":");["Date","Content-Length","Authorization-Token","Content-Type"].indexOf(d[0])<0||e("#response-headers").append('<div class="row"><div class="col-md-4"><kbd alt="'+d[0]+'">'+d[0]+'</kbd></div><div class="col-md-8"><var>'+d[1]+"</var></div></div>")}t.token=n.getResponseHeader("Authorization-Token"),null!==t.token&&(t.token=t.token.split(";"),t.token=void 0!==t.token[1]?t.token[1]:t.token[0]),e("#token").val(t.token),o=new Date-o;var l=Math.floor(o/1e3);o-=1e3*l,e("#response-headers").append('<div class="row"><div class="col-md-4"><kbd alt="Time">Time</kbd></div><div class="col-md-8"><var>'+l+"s "+o+"ms</var></div></div>"),a.unlock()}};if(null===t.token&&delete n.headers,n.data={},"GET"!==t.method&&e("#endpoint-params .tab-pane.active textarea").each(function(){n.contentType="application/json",n.data=JSON.stringify(e(this).val())}),void 0===n.contentType&&e("#endpoint-params .tab-pane.active input,#endpoint-params .tab-pane.active select").each(function(){"null"==e(this).val()?n.data[e(this).attr("id")]=null:e(this).val().toString().length>0&&(n.data[e(this).attr("id")]="true"==e(this).attr("json")?JSON.parse(e(this).val()):e(this).val())}),"DELETE"===t.method&&Object.keys(n.data).length>0){var s=n.url.split("?"),r=[],i=void 0===s[1]?[]:s[1].split("&");for(var d in s=s[0],i)r[i[d].split("=")[0]]=i[d].split("=")[1];for(var d in n.data)r[d]=n.data[d];for(var d in s+="?",r)s+=d+"="+r[d]+"&";n.url=s}e.ajax(n)}),delete t.init}}(AgenciaModerna,jQuery,WholeAuth),jQuery(AgenciaModerna.init);
